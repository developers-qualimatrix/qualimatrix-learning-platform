import { useEffect, useState } from "react";
import ReactDOM from "react-dom";
import { useTheme } from "@/context/ThemeContext";

interface AlertProps {
  message: string;
  type: string;
}

function Alert({ message, type }: AlertProps) {
  const { theme } = useTheme();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  if (!mounted) return null;

  return ReactDOM.createPortal(
    <div className={`qt-alert-container ${theme}-theme ${type}-alert`}>
      {type === "success" ? (
        theme === "light" ? (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
          >
            <g clipPath="url(#clip0_1195_624)">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M15 30C16.9698 30 18.9204 29.612 20.7403 28.8582C22.5601 28.1044 24.2137 26.9995 25.6066 25.6066C26.9995 24.2137 28.1044 22.5601 28.8582 20.7403C29.612 18.9204 30 16.9698 30 15C30 13.0302 29.612 11.0796 28.8582 9.25975C28.1044 7.43986 26.9995 5.78628 25.6066 4.3934C24.2137 3.00052 22.5601 1.89563 20.7403 1.14181C18.9204 0.387986 16.9698 -2.93527e-08 15 0C11.0218 5.92805e-08 7.20644 1.58035 4.3934 4.3934C1.58035 7.20644 0 11.0218 0 15C0 18.9782 1.58035 22.7936 4.3934 25.6066C7.20644 28.4196 11.0218 30 15 30ZM14.6133 21.0667L22.9467 11.0667L20.3867 8.93333L13.22 17.5317L9.51167 13.8217L7.155 16.1783L12.155 21.1783L13.445 22.4683L14.6133 21.0667Z"
                fill="white"
              />
            </g>
            <defs>
              <clipPath id="clip0_1195_624">
                <rect width="30" height="30" fill="white" />
              </clipPath>
            </defs>
          </svg>
        ) : (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="30"
            height="30"
            viewBox="0 0 30 30"
            fill="none"
          >
            <g clipPath="url(#clip0_1195_616)">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M15 30C16.9698 30 18.9204 29.612 20.7403 28.8582C22.5601 28.1044 24.2137 26.9995 25.6066 25.6066C26.9995 24.2137 28.1044 22.5601 28.8582 20.7403C29.612 18.9204 30 16.9698 30 15C30 13.0302 29.612 11.0796 28.8582 9.25975C28.1044 7.43986 26.9995 5.78628 25.6066 4.3934C24.2137 3.00052 22.5601 1.89563 20.7403 1.14181C18.9204 0.387986 16.9698 -2.93527e-08 15 0C11.0218 5.92805e-08 7.20644 1.58035 4.3934 4.3934C1.58035 7.20644 0 11.0218 0 15C0 18.9782 1.58035 22.7936 4.3934 25.6066C7.20644 28.4196 11.0218 30 15 30ZM14.6133 21.0667L22.9467 11.0667L20.3867 8.93333L13.22 17.5317L9.51167 13.8217L7.155 16.1783L12.155 21.1783L13.445 22.4683L14.6133 21.0667Z"
                fill="#65D070"
              />
            </g>
            <defs>
              <clipPath id="clip0_1195_616">
                <rect width="30" height="30" fill="white" />
              </clipPath>
            </defs>
          </svg>
        )
      ) : theme === "light" ? (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
        >
          <path
            d="M15 22.5C15.425 22.5 15.7815 22.356 16.0695 22.068C16.3575 21.78 16.501 21.424 16.5 21C16.5 20.575 16.356 20.219 16.068 19.932C15.78 19.645 15.424 19.501 15 19.5C14.575 19.5 14.219 19.644 13.932 19.932C13.645 20.22 13.501 20.576 13.5 21C13.5 21.425 13.644 21.7815 13.932 22.0695C14.22 22.3575 14.576 22.501 15 22.5ZM13.5 16.5H16.5V7.5H13.5V16.5ZM15 30C12.925 30 10.975 29.606 9.15 28.818C7.325 28.03 5.7375 26.9615 4.3875 25.6125C3.0375 24.2625 1.969 22.675 1.182 20.85C0.395 19.025 0.001 17.075 0 15C0 12.925 0.394 10.975 1.182 9.15C1.97 7.325 3.0385 5.7375 4.3875 4.3875C5.7375 3.0375 7.325 1.969 9.15 1.182C10.975 0.395 12.925 0.001 15 0C17.075 0 19.025 0.394 20.85 1.182C22.675 1.97 24.2625 3.0385 25.6125 4.3875C26.9625 5.7375 28.0315 7.325 28.8195 9.15C29.6075 10.975 30.001 12.925 30 15C30 17.075 29.606 19.025 28.818 20.85C28.03 22.675 26.9615 24.2625 25.6125 25.6125C24.2625 26.9625 22.675 28.0315 20.85 28.8195C19.025 29.6075 17.075 30.001 15 30Z"
            fill="white"
          />
        </svg>
      ) : (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
        >
          <g clipPath="url(#clip0_1195_620)">
            <path
              d="M15 22.5C15.425 22.5 15.7815 22.356 16.0695 22.068C16.3575 21.78 16.501 21.424 16.5 21C16.5 20.575 16.356 20.219 16.068 19.932C15.78 19.645 15.424 19.501 15 19.5C14.575 19.5 14.219 19.644 13.932 19.932C13.645 20.22 13.501 20.576 13.5 21C13.5 21.425 13.644 21.7815 13.932 22.0695C14.22 22.3575 14.576 22.501 15 22.5ZM13.5 16.5H16.5V7.5H13.5V16.5ZM15 30C12.925 30 10.975 29.606 9.15 28.818C7.325 28.03 5.7375 26.9615 4.3875 25.6125C3.0375 24.2625 1.969 22.675 1.182 20.85C0.395 19.025 0.001 17.075 0 15C0 12.925 0.394 10.975 1.182 9.15C1.97 7.325 3.0385 5.7375 4.3875 4.3875C5.7375 3.0375 7.325 1.969 9.15 1.182C10.975 0.395 12.925 0.001 15 0C17.075 0 19.025 0.394 20.85 1.182C22.675 1.97 24.2625 3.0385 25.6125 4.3875C26.9625 5.7375 28.0315 7.325 28.8195 9.15C29.6075 10.975 30.001 12.925 30 15C30 17.075 29.606 19.025 28.818 20.85C28.03 22.675 26.9615 24.2625 25.6125 25.6125C24.2625 26.9625 22.675 28.0315 20.85 28.8195C19.025 29.6075 17.075 30.001 15 30Z"
              fill="#EA2429"
            />
          </g>
          <defs>
            <clipPath id="clip0_1195_620">
              <rect width="30" height="30" fill="white" />
            </clipPath>
          </defs>
        </svg>
      )}
      <p style={{ fontSize: "16px" }}>{message}</p>
    </div>,
    document.body
  );
}

export default Alert;
